<!DOCTYPE html>
<html>
<head>
    <title>Candlestick Test</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <style>
        body { font-family: Arial; background: #1a1f2e; color: #fff; padding: 20px; }
        h1 { text-align: center; color: #fff; }
        #chart { height: 600px; max-width: 1200px; margin: 0 auto; }
    </style>
</head>
<body>
    <h1>üïØÔ∏è Candlestick Chart Validation</h1>
    <canvas id="chart"></canvas>
    <script>
        const data = {"dates": ["2025-01-01", "2025-01-02", "2025-01-03", "2025-01-04", "2025-01-05", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-09", "2025-01-10", "2025-01-11", "2025-01-12", "2025-01-13", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-18", "2025-01-19", "2025-01-20"], "open": [150.0, 150.5, 151.0, 151.5, 152.0, 152.5, 153.0, 153.5, 154.0, 154.5, 155.0, 155.5, 156.0, 156.5, 157.0, 157.5, 158.0, 158.5, 159.0, 159.5], "high": [152.5, 153.0, 153.5, 154.0, 154.5, 155.0, 155.5, 156.0, 156.5, 157.0, 157.5, 158.0, 158.5, 159.0, 159.5, 160.0, 160.5, 161.0, 161.5, 162.0], "low": [148.5, 149.0, 149.5, 150.0, 150.5, 151.0, 151.5, 152.0, 152.5, 153.0, 153.5, 154.0, 154.5, 155.0, 155.5, 156.0, 156.5, 157.0, 157.5, 158.0], "close": [150.5, 151.2, 151.9, 152.6, 153.3, 154.0, 154.7, 155.4, 156.1, 156.8, 157.5, 158.2, 158.9, 159.6, 160.3, 161.0, 161.7, 162.4, 163.1, 163.8], "ma_50": [150.0, 150.6, 151.2, 151.8, 152.4, 153.0, 153.6, 154.2, 154.8, 155.4, 156.0, 156.6, 157.2, 157.8, 158.4, 159.0, 159.6, 160.2, 160.8, 161.4], "ma_200": [149.5, 149.9, 150.3, 150.7, 151.1, 151.5, 151.9, 152.3, 152.7, 153.1, 153.5, 153.9, 154.3, 154.7, 155.1, 155.5, 155.9, 156.3, 156.7, 157.1]};
        const o = data.open;
        const h = data.high;
        const l = data.low;
        const c = data.close;
        const d = data.dates;
        const m50 = data.ma_50;
        const m200 = data.ma_200;
        
        const datasets = [];
        
        // Wicks
        datasets.push({
            label: 'Wicks',
            type: 'scatter',
            data: d.map((x, i) => ({ x, y: (h[i] + l[i])/2 })),
            borderColor: d.map((_, i) => c[i] >= o[i] ? '#26a69a' : '#ef5350'),
            borderWidth: 2,
            pointRadius: 0
        });
        
        // Bodies
        datasets.push({
            label: 'OHLC',
            type: 'bar',
            data: d.map((x, i) => ({ x, y: Math.max(o[i], c[i]), base: Math.min(o[i], c[i]) })),
            backgroundColor: c.map((v, i) => v >= o[i] ? '#26a69a' : '#ef5350'),
            borderColor: c.map((v, i) => v >= o[i] ? '#26a69a' : '#ef5350'),
            barPercentage: 0.6
        });
        
        // MA50
        datasets.push({
            label: 'MA 50',
            type: 'line',
            data: d.map((x, i) => ({ x, y: m50[i] })),
            borderColor: '#ffb300',
            borderDash: [5, 5],
            fill: false,
            borderWidth: 2,
            pointRadius: 0
        });
        
        // MA200
        datasets.push({
            label: 'MA 200',
            type: 'line',
            data: d.map((x, i) => ({ x, y: m200[i] })),
            borderColor: '#e53935',
            borderDash: [5, 5],
            fill: false,
            borderWidth: 2,
            pointRadius: 0
        });
        
        new Chart(document.getElementById('chart'), {
            type: 'line',
            data: { labels: d, datasets: datasets },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: '#e0e0e0' } },
                    tooltip: { backgroundColor: 'rgba(0,0,0,0.8)', titleColor: '#fff', bodyColor: '#e0e0e0' }
                },
                scales: {
                    x: { ticks: { color: '#999' } },
                    y: { ticks: { color: '#999' } }
                }
            }
        });
    </script>
</body>
</html>